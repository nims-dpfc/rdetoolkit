
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../../quickstart/" rel="prev"/>
<link href="../directory/" rel="next"/>
<link href="../../../img/2585322.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.38" name="generator"/>
<title>構造化処理を構築する - RDEToolKit Documentation</title>
<link href="../../../assets/stylesheets/main.8c3ca2c6.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Noto Sans JP";--md-code-font:"Roboto Mono"}</style>
<link href="../../../assets/_mkdocstrings.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#_1">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="RDEToolKit Documentation" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="RDEToolKit Documentation">
<img alt="logo" src="../../../img/2585322.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            RDEToolKit Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              構造化処理を構築する
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/nims-dpfc/rdetoolkit" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    nims-dpfc/rdetoolkit
  </div>
</a>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
          
  
  Getting started

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../install/">
          
  
  Installation

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../../quickstart/">
          
  
  User Guide

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../rdetoolkit/impl/compressed_controller/">
          
  
  API Documentation

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../contribute/home/">
          
  
  Development

        </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="RDEToolKit Documentation" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="RDEToolKit Documentation">
<img alt="logo" src="../../../img/2585322.png"/>
</a>
    RDEToolKit Documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/nims-dpfc/rdetoolkit" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    nims-dpfc/rdetoolkit
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
<span class="md-ellipsis">
    Getting started
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    RDEToolKit
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Installation
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Installation
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../install/">
<span class="md-ellipsis">
    インストール方法
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
<span class="md-ellipsis">
    User Guide
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
<span class="md-ellipsis">
    Quick Start
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_1">
<span class="md-nav__icon md-icon"></span>
            Quick Start
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../quickstart/">
<span class="md-ellipsis">
    クイックスタート
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
<span class="md-ellipsis">
    構造化処理
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
            構造化処理
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    構造化処理を構築する
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    構造化処理を構築する
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#rdetoolkit">
<span class="md-ellipsis">
      RDEToolKitがサポートする処理
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
<span class="md-ellipsis">
      起動処理
    </span>
</a>
<nav aria-label="起動処理" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
<span class="md-ellipsis">
      実装例
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
<span class="md-ellipsis">
      具体的な処理について
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
<span class="md-ellipsis">
      カスタム用構造化処理関数の作成
    </span>
</a>
<nav aria-label="カスタム用構造化処理関数の作成" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
<span class="md-ellipsis">
      実装例
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_7">
<span class="md-ellipsis">
      起動処理へ組み込む
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_8">
<span class="md-ellipsis">
      終了処理について
    </span>
</a>
<nav aria-label="終了処理について" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_9">
<span class="md-ellipsis">
      各種ファイルのバリデーション
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_10">
<span class="md-ellipsis">
      説明欄への自動転記
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../directory/">
<span class="md-ellipsis">
    サポートするディレクトリ
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../rdepath/">
<span class="md-ellipsis">
    構造化ディレクトリパスの取得
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../errorhandling/">
<span class="md-ellipsis">
    構造化処理のエラーハンドリング
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../feature_description/">
<span class="md-ellipsis">
    データタイル説明欄への自動記述について
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
<span class="md-ellipsis">
    設定ファイル
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
            設定ファイル
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../config/config/">
<span class="md-ellipsis">
    RDEToolKit設定ファイル
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../config/mode/">
<span class="md-ellipsis">
    RDEToolKitのデータ登録モード
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../config/file_folder_mode/">
<span class="md-ellipsis">
    圧縮ファイルの形式について
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../config/magic_variable/">
<span class="md-ellipsis">
    Magic Variableによるデータ登録について
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
<span class="md-ellipsis">
    テンプレートファイル
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_4">
<span class="md-nav__icon md-icon"></span>
            テンプレートファイル
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../metadata_definition_file/">
<span class="md-ellipsis">
    テンプレートファイル
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
<span class="md-ellipsis">
    バリデーション
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_5">
<span class="md-nav__icon md-icon"></span>
            バリデーション
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../validation/">
<span class="md-ellipsis">
    バリデーション機能
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
<span class="md-ellipsis">
    Docker
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_6">
<span class="md-nav__icon md-icon"></span>
            Docker
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../docker/">
<span class="md-ellipsis">
    Using RDEToolKit with Docker
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    API Documentation
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            API Documentation
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
<span class="md-ellipsis">
    impl
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_1">
<span class="md-nav__icon md-icon"></span>
            impl
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rdetoolkit/impl/compressed_controller/">
<span class="md-ellipsis">
    compressed_controller
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rdetoolkit/impl/input_controller/">
<span class="md-ellipsis">
    input_controller
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
<span class="md-ellipsis">
    interface
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
            interface
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rdetoolkit/interface/filechecker/">
<span class="md-ellipsis">
    filechecker
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
<span class="md-ellipsis">
    models
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_3">
<span class="md-nav__icon md-icon"></span>
            models
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rdetoolkit/models/invoice_schema/">
<span class="md-ellipsis">
    invoice_schema
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rdetoolkit/models/metadata/">
<span class="md-ellipsis">
    metadata
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rdetoolkit/models/rde2types/">
<span class="md-ellipsis">
    rde2types
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rdetoolkit/config/">
<span class="md-ellipsis">
    config
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rdetoolkit/workflows/">
<span class="md-ellipsis">
    workflows
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rdetoolkit/rde2util/">
<span class="md-ellipsis">
    rde2util
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rdetoolkit/invoicefile/">
<span class="md-ellipsis">
    invoicefile
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rdetoolkit/modeproc/">
<span class="md-ellipsis">
    modeproc
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rdetoolkit/validation/">
<span class="md-ellipsis">
    validation
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rdetoolkit/img2thumb/">
<span class="md-ellipsis">
    img2thumb
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rdetoolkit/rdelogger/">
<span class="md-ellipsis">
    rdelogger
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rdetoolkit/csv2graph.md">
<span class="md-ellipsis">
    None
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../rdetoolkit/exceptions/">
<span class="md-ellipsis">
    exceptions
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    Development
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Development
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contribute/home/">
<span class="md-ellipsis">
    Top
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contribute/documents_contributing/">
<span class="md-ellipsis">
    Documents
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contribute/sourcecode_contributing/">
<span class="md-ellipsis">
    Source Code
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="_1">構造化処理を構築する</h1>
<p>RDE構造化処理は、大きく分けて、以下の3つのフェーズに分けられます。</p>
<pre class="mermaid"><code>graph LR
    起動処理 --&gt; カスタム構造化処理
    カスタム構造化処理 --&gt; 終了処理
</code></pre>
<p>起動処理、終了処理は、rdetoolkitを使うことで簡単に実行できます。そのため、ユーザー自身は、ご自身のデータに対する処理を実行する<code>カスタム構造化処理</code>を定義するだけです。</p>
<h2 id="rdetoolkit">RDEToolKitがサポートする処理</h2>
<ul>
<li>起動モードの自動判定</li>
<li>入力データを指定したディレクトリに保存する</li>
<li>Main画像をサムネイル画像に保存する</li>
<li>magic variableの適用</li>
<li>invoice.schema.json, invoice.json等のバリデーション</li>
<li>metadata-def.jsonからデータセットタイルの説明欄自動生成</li>
</ul>
<h2 id="_2">起動処理</h2>
<p>起動処理では、カスタム構造化処理を実行する前の処理を実行します。</p>
<div class="admonition reference">
<p class="admonition-title">Reference</p>
<p>API Documents: <a href="/rdetoolkit/workflows/#run">rdetoolkit.workflows.run</a></p>
</div>
<h3 id="_3">実装例</h3>
<p>実装は、プログラムのエントリーポイントとなるファイルに実装することを推奨します。例えば、<code>main.py</code>や<code>run.py</code>というファイルを作成し、以下のように実装します。</p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">5</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">modules</span> <span style="color: #008800; font-weight: bold">import</span> process <span style="color: #888888">#独自で定義した構造化処理関数</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit</span>

<span style="color: #888888"># run()がRDE構造化の起動処理と後処理を実行</span>
rdetoolkit<span style="color: #333333">.</span>workflows<span style="color: #333333">.</span>run(custom_dataset_function<span style="color: #333333">=</span>process<span style="color: #333333">.</span>dataset)
</code></pre></div></td></tr></table></div>
<h3 id="_4">具体的な処理について</h3>
<p>起動処理は、次の処理を実行します。</p>
<ul>
<li>RDE構造化処理で必要なディレクトリの自動作成</li>
<li>入力ファイルを<code>raw</code>ディレクトリへ自動保存</li>
<li>入力ファイル・設定ファイルの内容から、各種モードに応じた読み込み処理</li>
<li>読み込んだファイルを、独自で定義したカスタム構造化処理に渡し実行</li>
</ul>
<blockquote>
<p>各種モードごとのファイル読み込みでは、ファイルの内容を読み込んでいません。そのため、ファイルに対する具体的な処理は、カスタム構造化処理等で定義してください。</p>
</blockquote>
<pre class="mermaid"><code>graph TD
    init1[起動処理] --&gt; init2[ディレクトリ作成]
    init2--&gt;init3{モード選択}
    init3--&gt;|default|init6[invoiceモード]
    init3--&gt;init7[Excelinvoiceモード]
    init3--&gt;init8[マルチデータタイル]
    init3--&gt;init9[RDEフォーマットモード]
    init6--&gt;init10[カスタム構造化処理]
    init7--&gt;init10
    init8--&gt;init10
    init9--&gt;init10
    init10 --&gt; init11[入力データのrawフォルダに追加]
    init11 --&gt; init12[[ユーザー定義の構造化処理実行]]
    init12 --&gt; init13[サムネイル画像の自動保存]
    init13 --&gt; init14[magic variable]
    init14 --&gt; init15[終了]
</code></pre>
<h2 id="_5">カスタム用構造化処理関数の作成</h2>
<p>rdetoolkitでは、独自の処理をRDEの構造化処理のフローに組み込み込むことが可能です。独自の構造化処理は、入力データに対してデータ加工・グラフ化・機械学習用のcsvファイルの作成など、データセット固有の処理を定義することで、RDEへ柔軟にデータを登録可能です。</p>
<h3 id="_6">実装例</h3>
<p>ここでは、rdetoolkitへ渡す独自データセット関数を、<code>dataset()</code>とします。<code>dataset()</code>は、以下の2つの引数を渡してください。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>独自のクラス・関数群を定義する場合、必ず<code>RdeInputDirPaths</code>, <code>RdeOutputResourcePath</code>を引数で受け取り可能な関数でwrapしてください。</p>
</div>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">4</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #888888"># wrap用関数</span>
<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">dataset</span>(srcpaths: RdeInputDirPaths, resource_paths: RdeOutputResourcePath):
    <span style="color: #888888"># この関数内でユーザ自身が定義したクラスや関数を呼び出す</span>
    <span style="color: #333333">...</span>
</code></pre></div></td></tr></table></div>
<p>これの引数には、構造化するために必要な各種ディレクトリ情報やファイル情報が格納されています。特に、<code>RdeOutputResourcePath</code>には、ファイル保存先情報が格納されています。構造化処理内で上記のディレクトリ・ファイルパスを取得する方法は、<a href="../rdepath/">構造化ディレクトリパスの取得</a>を参照してください。</p>
<ul>
<li>srcpaths (RdeInputDirPaths): 入力されたリソースファイルのパス情報</li>
<li>resource_paths (RdeOutputResourcePath): 処理結果を保存するための出力リソースパス情報</li>
</ul>
<div class="admonition reference">
<p class="admonition-title">Reference</p>
<ul>
<li>API Documentation: <a href="/rdetoolkit/models/rde2types/#rdeinputdirpaths">RdeInputDirPaths - rde2types</a></li>
<li>API Documentation: <a href="/rdetoolkit/models/rde2types/#rdeoutputresourcepath">RdeOutputResourcePath - rde2types</a></li>
</ul>
</div>
<p>今回の例では、<code>modules</code>以下に、<code>display_messsage()</code>, <code>custom_graph()</code>, <code>custom_extract_metadata()</code>というダミー処理を定義し、独自の構造化処理を定義します。これらの関数は、<code>modules/process.py</code>というファイルを作成し定義します。以下の2つの引数を渡す関数でなければ、rdetoolkitは正しく処理が実行できません。</p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 7</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 8</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 9</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">10</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">11</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">12</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">13</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">14</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">15</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #888888"># modules/process.py</span>
<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">display_messsage</span>(path):
    <span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Test Message!: </span><span style="background-color: #eeeeee">{</span>path<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)

<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">custom_graph</span>():
    <span style="color: #007020">print</span>(<span style="background-color: #fff0f0">"graph"</span>)

<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">custom_extract_metadata</span>():
    <span style="color: #007020">print</span>(<span style="background-color: #fff0f0">"extract metadata"</span>)

<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">dataset</span>(srcpaths, resource_paths):
    display_messsage(srcpaths)
    display_messsage(resource_paths)
    custom_graph()
    custom_extract_metadata()
</code></pre></div></td></tr></table></div>
<h3 id="_7">起動処理へ組み込む</h3>
<p>この<code>dataset()</code>を起動するためには、先ほどの起動処理で作成したエントリーポイントとなるファイル(<code>main.py</code>など)に以下のように定義します。</p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">5</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">modules</span> <span style="color: #008800; font-weight: bold">import</span> process <span style="color: #888888">#独自で定義した構造化処理関数</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit</span>

<span style="color: #888888"># run()にカスタム構造化処理をを渡す</span>
result <span style="color: #333333">=</span> rdetoolkit<span style="color: #333333">.</span>workflows<span style="color: #333333">.</span>run(custom_dataset_function<span style="color: #333333">=</span>process<span style="color: #333333">.</span>dataset)
</code></pre></div></td></tr></table></div>
<p><code>result</code>には、構造化処理の実行ステータスが格納されます。</p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 7</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 8</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 9</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">10</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">11</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">12</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">13</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">14</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">15</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">16</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">17</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">18</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">19</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">20</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">21</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">22</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">23</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">24</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #333333">{</span>
<span style="color: #bbbbbb">  </span><span style="background-color: #fff0f0">"statuses"</span>:<span style="color: #bbbbbb"> </span><span style="color: #333333">[</span>
<span style="color: #bbbbbb">    </span><span style="color: #333333">{</span>
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"run_id"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"0000"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"title"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"test-dataset"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"status"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"success"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"mode"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"MultiDataTile"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"error_code"</span>:<span style="color: #bbbbbb"> </span>null,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"error_message"</span>:<span style="color: #bbbbbb"> </span>null,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"target"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"data/inputdata"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"stacktrace"</span>:<span style="color: #bbbbbb"> </span>null
<span style="color: #bbbbbb">    </span><span style="color: #333333">}</span>,
<span style="color: #bbbbbb">    </span><span style="color: #333333">{</span>
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"run_id"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"0001"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"title"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"test-dataset"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"status"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"success"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"mode"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"MultiDataTile"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"error_code"</span>:<span style="color: #bbbbbb"> </span>null,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"error_message"</span>:<span style="color: #bbbbbb"> </span>null,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"target"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"data/inputdata"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"stacktrace"</span>:<span style="color: #bbbbbb"> </span>null
<span style="color: #bbbbbb">    </span><span style="color: #333333">}</span>
<span style="color: #bbbbbb">  </span><span style="color: #333333">]</span>
<span style="color: #333333">}</span>
</code></pre></div></td></tr></table></div>
<p>失敗した時の<code>result</code>の出力</p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 7</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 8</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 9</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">10</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">11</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">12</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">13</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">14</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">15</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">16</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">17</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">18</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">19</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">20</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">21</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">22</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">23</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">24</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #333333">{</span>
<span style="color: #bbbbbb">  </span><span style="background-color: #fff0f0">"statuses"</span>:<span style="color: #bbbbbb"> </span><span style="color: #333333">[</span>
<span style="color: #bbbbbb">    </span><span style="color: #333333">{</span>
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"run_id"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"0000"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"title"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"Structured Process Faild: MultiDataTile"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"status"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"failed"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"mode"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"MultiDataTile"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"error_code"</span>:<span style="color: #bbbbbb"> </span><span style="color: #6600EE; font-weight: bold">999</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"error_message"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"Error: Error in modules"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"target"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"data/inputdata/sample1.txt"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"stacktrace"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"Traceback (most recent call last):\n  File \"/Users/myproject/.venv/lib/python3.10/site-packages/rdetoolkit/exceptions.py\", line 158, in skip_exception_context\n    yield error_info\n  File \"/Users/myproject/.venv/lib/python3.10/site-packages/rdetoolkit/workflows.py\", line 242, in run\n    status = multifile_mode_process(str(idx), srcpaths, rdeoutput_resource, custom_dataset_function)\n  File \"/Users/myproject/.venv/lib/python3.10/site-packages/rdetoolkit/modeproc.py\", line 157, in multifile_mode_process\n    datasets_process_function(srcpaths, resource_paths)\n  File \"/Users/myproject/modules/modules.py\", line 5, in error_modules\n    raise Exception(\"Error in modules\")\nException: Error in modules\n"</span>
<span style="color: #bbbbbb">    </span><span style="color: #333333">}</span>,
<span style="color: #bbbbbb">    </span><span style="color: #333333">{</span>
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"run_id"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"0001"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"title"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"Structured Process Faild: MultiDataTile"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"status"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"failed"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"mode"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"MultiDataTile"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"error_code"</span>:<span style="color: #bbbbbb"> </span><span style="color: #6600EE; font-weight: bold">999</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"error_message"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"Error: Error in modules"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"target"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"data/inputdata/sample2.txt"</span>,
<span style="color: #bbbbbb">      </span><span style="background-color: #fff0f0">"stacktrace"</span>:<span style="color: #bbbbbb"> </span><span style="background-color: #fff0f0">"Traceback (most recent call last):\n  File \"/Users/myproject/.venv/lib/python3.10/site-packages/rdetoolkit/exceptions.py\", line 158, in skip_exception_context\n    yield error_info\n  File \"/Users/myproject/.venv/lib/python3.10/site-packages/rdetoolkit/workflows.py\", line 242, in run\n    status = multifile_mode_process(str(idx), srcpaths, rdeoutput_resource, custom_dataset_function)\n  File \"/Users/myproject/.venv/lib/python3.10/site-packages/rdetoolkit/modeproc.py\", line 157, in multifile_mode_process\n    datasets_process_function(srcpaths, resource_paths)\n  File \"/Users/myproject/modules/modules.py\", line 5, in error_modules\n    raise Exception(\"Error in modules\")\nException: Error in modules\n"</span>
<span style="color: #bbbbbb">    </span><span style="color: #333333">}</span>
<span style="color: #bbbbbb">  </span><span style="color: #333333">]</span>
<span style="color: #333333">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="_8">終了処理について</h2>
<p>続いて、<code>rdetoolkit.workflow.run()</code>が実行する終了処理について説明します。</p>
<ul>
<li>生成ファイル、入力ファイルのバリデーション</li>
<li>Main画像から代表画像の自動保存</li>
<li>データタイル説明欄へ指定メタデータの自動記述</li>
</ul>
<pre class="mermaid"><code>graph TD
    end1[カスタム構造化処理] --&gt; end2[バリデーション]
    end2 --&gt; end3{設定:save_thumbnail_image}
    end3 --&gt;|False|end6[説明欄の自動記述]
    end3--&gt;|True|end5[Main画像からサムネイル画像保存]
    end5 --&gt; end6
    end6 --&gt; end7[終了]
</code></pre>
<h3 id="_9">各種ファイルのバリデーション</h3>
<p>バリデーションは、次のファイルが対象となります。これらのファイルは、データセット開設時、データ登録時に重要なファイルとなります。</p>
<ul>
<li><code>tasksupport/metadata-def.json</code></li>
<li><code>tasksupport/invoice.shcema.json</code></li>
<li><code>data/invoice/invoice.json</code></li>
</ul>
<div class="admonition tips">
<p class="admonition-title">Documents</p>
</div>
<p><a href="../../metadata_definition_file/">テンプレートファイルについて</a></p>
<h3 id="_10">説明欄への自動転記</h3>
<p>以下のドキュメントを参照してください。</p>
<ul>
<li><a href="../feature_description/">データタイル説明欄への自動転記</a></li>
</ul>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/nims-dpfc/rdetoolkit" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<div class="md-consent" data-md-component="consent" hidden="" id="__consent">
<div class="md-consent__overlay"></div>
<aside class="md-consent__inner">
<form class="md-consent__form md-grid md-typeset" name="consent">
<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" id="__settings" type="checkbox"/>
<div class="md-consent__settings">
<ul class="task-list">
<li class="task-list-item">
<label class="task-list-control">
<input checked="" name="github" type="checkbox"/>
<span class="task-list-indicator"></span>
          GitHub
        </label>
</li>
</ul>
</div>
<div class="md-consent__controls">
<button class="md-button md-button--primary">Accept</button>
<label class="md-button" for="__settings">Manage settings</label>
</div>
</form>
</aside>
</div>
<script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.top", "toc.integrate", "navigation.tabs", "navigation.tabs.sticky"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.d6f25eb3.min.js"></script>
<script src="https://unpkg.com/mermaid@10.9.0/dist/mermaid.min.js"></script>
<script>window.mermaidConfig = {default: {
    startOnLoad: false
}};</script></body>
</html>